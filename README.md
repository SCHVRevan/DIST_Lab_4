# DIST_Lab_4

## Постановка задачи
Реализовать защиту данных пользовательских папок и файлов находящихся в папке, а также подпапках путем шифрования. Для доступа к данным в исходной папке необходимо выполнить дешифрование.

## Описание
Для выполнения поставленной задачи разработано консольное приложение, в котором реализован рекурсивный обход директорий, а также шифрование и дешифрование файлов с использованием алгоритма AES-256 в режиме CBC (Cipher Block Chaining).

## Инструментарий
- Обход директорий выполняется с помощью заголовка 'dirent.h' библиотеки 'C POSIX', который содержит конструкции, облегчающие обход каталога
- Для шифрования и дешифрования применяется алгоритм AES-256 в режиме CBC из библиотек OpenSSL ('openssl/aes.h')
- Для единой точки доступа к классу 'Encryptor' используется паттерн **Singleton**
- 

## Требования
- Дистрибутив Linux
- CMake v3.5 или выше
- Компилятор с поддержкой C++17
- OpenSSL (dev-пакет)

## Установка зависимостей
```bash
sudo apt update
sudo apt install -y build-essential cmake libssl-dev
```

## Сборка
1. Откройте командную строку и перейдите в директорию с исходным кодом
2. ```bash
    mkdir build
    cd build
    ```
3. ```bash
    cmake ..
    make
    ```
## Использование
   ```bash
   # Шифрование
   ./lab4 <path> enc <key>
   # Дешифрование
   ./lab4 <path> dec <key>
   ```
## Примеры
   ```bash
   # Зашифровать все файлы в recursive_check
   ./lab4 /mnt/d/Test_folder/recursive_check enc 17051991
   # Дешифровать все файлы в recursive_check
   ./lab4 /mnt/d/Test_folder/recursive_check dec 17051991
   ```
## Структура проекта

```
Lab4/
├─ CMakeLists.txt
├─ main.cpp            # Точка входа, принимает аргументы и вызывает Encryptor
├─ encryptor.h/.cpp    # Singleton-класс: обход директорий и вызов AES
├─ dir_checker.h/.cpp  # Рекурсивный сбор файлов с помощью dirent.h
└─ cipher.h/.cpp       # Обёртка над OpenSSL AES под CBC
```
